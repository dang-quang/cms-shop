_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[97],{"/AbW":function(e,t,r){"use strict";r.r(t),r.d(t,"TableAll",(function(){return k}));var a=r("nKUr"),n=r("o0o1"),c=r.n(n),s=r("HaE+"),o=r("ODXe"),i=r("q1tI"),u=r.n(i),l=r("WIEF"),b=r("sp93"),d=r("Ig9u"),j=r("lsQ0"),p=r("s/Ec"),x=r("W5le"),h=r("oxre"),O=r("9kay"),f=r("N54T"),m=r("CXox"),g=r("/MKj"),v=r("DzNn"),_=r("Orb1"),w=r("WztA"),S=r("33Fu"),C=r("20a2"),E=r("bgFo"),y=r("LvDl"),k=function(){var e=Object(C.useRouter)(),t=Object(g.useDispatch)(),r=Object(O.c)().t,n=u.a.useState([]),i=Object(o.a)(n,2),k=i[0],D=i[1],P=u.a.useState(null),W=Object(o.a)(P,2),N=W[0],U=W[1],A=Object(l.d)(!1),R=Object(o.a)(A,2),T=R[0],F=R[1],X=F.on,z=F.off,I=u.a.useState(1),L=Object(o.a)(I,2),M=(L[0],L[1]),q=u.a.useState(0),G=Object(o.a)(q,2),H=G[0],J=G[1],K=u.a.useState(""),Y=Object(o.a)(K,2),B=Y[0],Q=Y[1],V=Object(l.d)(!1),Z=Object(o.a)(V,2),$=Z[0],ee=Z[1],te=ee.on,re=ee.off,ae=[r("serial_number"),"Voucher Name","Discount Amount","Usage quantity","Usage","Status | Claiming Period","Actions"],ne=Object(h.usePagination)({total:H,limits:{outer:1,inner:2},initialState:{pageSize:50,isDisabled:!1,currentPage:1}}),ce=ne.pages,se=ne.pagesCount,oe=ne.currentPage,ie=ne.setCurrentPage,ue=ne.isDisabled;u.a.useEffect((function(){Object(s.a)(c.a.mark((function e(){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(Object(v.v)(!0)),e.next=4,Object(m.Y)({page:1});case 4:(a=e.sent).code===_.b.MSG_SUCCESS&&a.data&&a.data.results?(D(a.data.results),M(a.data.totalPages),J(a.data.totalRecords)):w.b.error({title:r("error"),message:r("no_data_exists")});case 6:return e.prev=6,t(Object(v.v)(!1)),e.finish(6);case 9:case"end":return e.stop()}}),e,null,[[0,,6,9]])})))()}),[]),u.a.useEffect((function(){Object(s.a)(c.a.mark((function e(){var a,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!$){e.next=8;break}return t(Object(v.v)(!0)),$&&(a=B),e.next=6,Object(m.Y)({keyWord:a,page:oe});case 6:(n=e.sent).code===_.b.MSG_SUCCESS&&n.data&&n.data.results?(D(null===n.data.results?[]:n.data.results),M(n.data.totalPages),J(n.data.totalRecords)):(D([]),M(1),J(0),w.b.error({title:r("no_results_found"),message:r("no_results_found_for_your_search")}));case 8:return e.prev=8,t(Object(v.v)(!1)),re(),e.finish(8);case 12:case"end":return e.stop()}}),e,null,[[0,,8,12]])})))()}),[$,oe,B]);var le=u.a.useCallback(Object(s.a)(c.a.mark((function a(){var n;return c.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,z(),t(Object(v.v)(!0)),a.next=5,Object(m.W)({id:N.id});case 5:(n=a.sent).code===_.b.MSG_SUCCESS?(U(null),e.push("/admin/voucher")):w.b.error({title:r("error"),message:n.message?n.message.text:"Error"}),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),console.log("delete voucher error");case 12:return a.prev=12,t(Object(v.v)(!1)),a.finish(12);case 15:case"end":return a.stop()}}),a,null,[[0,9,12,15]])}))),[N]);return Object(a.jsxs)(b.d,{children:[Object(a.jsxs)(d.c,{maxW:"570px",borderRadius:"4px",overflow:"hidden",children:[Object(a.jsx)(d.a,{value:B,onChange:function(e){return Q(e.target.value)},placeholder:"Search voucher name, code"}),Object(a.jsx)(d.g,{borderRadius:"4px",cursor:"pointer",h:"full",bg:"primary.100",w:"100px",children:Object(a.jsx)(b.e,{onClick:te,children:Object(a.jsx)(j.a,{as:S.e,w:"24px",h:"24px",color:"white"})})})]}),Object(a.jsx)(b.d,{mt:"6",bg:"white",borderRadius:"4px",overflow:"auto",borderWidth:"1px",borderColor:"border-5",children:Object(a.jsxs)(p.a,{variant:"simple",minW:"1200px",children:[Object(a.jsx)(p.h,{h:"52px",bg:"primary.100",children:Object(a.jsx)(p.i,{children:ae.map((function(e,t){return Object(a.jsx)(p.g,{borderBottomWidth:"0px",color:"white",textStyle:"b-md",textTransform:"capitalize",isNumeric:2===t||3===t||t===ae.length-1,children:e},t)}))})}),Object(y.isEmpty)(k)?Object(a.jsx)(b.d,{minH:"220px",children:Object(a.jsxs)(b.e,{h:"220px",position:"absolute",insetX:"0",flexDirection:"column",alignSelf:"center",children:[Object(a.jsx)(x.a,{w:"150px",h:"100px",src:f.a.no_data}),Object(a.jsx)(b.C,{textStyle:"body",textAlign:"center",color:"primary.100",mt:"1",children:"No Data Found"})]})}):Object(a.jsx)(a.Fragment,{children:k.map((function(t,r){return Object(a.jsx)(E.v,{item:t,index:r,onUpdate:function(){e.push({pathname:"/admin/voucher/update",query:t})},onDelete:function(){U(t),X()}},r)}))})]})}),Object(a.jsxs)(b.j,{justifyContent:"space-between",alignItems:"center",children:[Object(a.jsx)(E.m,{pagesCount:se,currentPage:oe,isDisabled:ue,onPageChange:function(e){D([]),ie(e)},pages:ce,mt:"24px",mb:"8px"}),Object(a.jsx)(b.C,{textStyle:"h4-m",children:r("results_page",{start:50*(oe-1)+1,end:50*(oe-1)+k.length,total:H})})]}),Object(a.jsx)(E.j,{isOpen:T,onClose:z,title:"Confirm Deletion",description:r("deleteConfirm"),buttonLeft:{title:r("cancel"),onClick:z},buttonRight:{title:r("confirm"),onClick:le}})]})};t.default=k},LxUn:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/voucher/components/TableAll",function(){return r("/AbW")}])}},[["LxUn",0,1,9,13,16,18,19,21,20,17,22,2,3,4,5,6,7,10,8,12,11,14,15,23]]]);