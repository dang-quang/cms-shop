_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[99],{"7GH4":function(e,t,n){"use strict";n.r(t),n.d(t,"TableHappening",(function(){return P}));var r=n("nKUr"),a=n("o0o1"),c=n.n(a),s=n("HaE+"),o=n("ODXe"),i=n("q1tI"),u=n.n(i),l=n("WIEF"),d=n("sp93"),b=n("Ig9u"),p=n("lsQ0"),j=n("s/Ec"),x=n("W5le"),h=n("oxre"),O=n("9kay"),f=n("CXox"),m=n("/MKj"),g=n("DzNn"),v=n("Orb1"),_=n("WztA"),w=n("33Fu"),S=n("bgFo"),C=n("LvDl"),E=n("20a2"),y=n("N54T"),P=function(){var e=Object(E.useRouter)(),t=Object(m.useDispatch)(),n=Object(O.c)().t,a=u.a.useState([]),i=Object(o.a)(a,2),P=i[0],D=i[1],N=u.a.useState(1),k=Object(o.a)(N,2),A=(k[0],k[1]),H=u.a.useState(0),W=Object(o.a)(H,2),G=W[0],R=W[1],U=u.a.useState(""),z=Object(o.a)(U,2),I=z[0],T=z[1],F=Object(l.d)(!1),X=Object(o.a)(F,2),M=X[0],q=X[1],V=q.on,J=q.off,K=u.a.useState(null),L=Object(o.a)(K,2),Y=L[0],B=L[1],Q=Object(l.d)(!1),Z=Object(o.a)(Q,2),$=Z[0],ee=Z[1],te=ee.on,ne=ee.off,re=[n("serial_number"),"Voucher Name","Discount Amount","Usage quantity","Usage","Status | Claiming Period","Actions"],ae=Object(h.usePagination)({total:G,limits:{outer:1,inner:2},initialState:{pageSize:50,isDisabled:!1,currentPage:1}}),ce=ae.pages,se=ae.pagesCount,oe=ae.currentPage,ie=ae.setCurrentPage,ue=ae.isDisabled;u.a.useEffect((function(){Object(s.a)(c.a.mark((function e(){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(Object(g.v)(!0)),e.next=4,Object(f.Y)({page:1,type:v.n.HAPPENING});case 4:(r=e.sent).code===v.b.MSG_SUCCESS&&r.data&&r.data.results?(D(r.data.results),A(r.data.totalPages),R(r.data.totalRecords)):_.b.error({title:n("error"),message:n("no_data_exists")});case 6:return e.prev=6,t(Object(g.v)(!1)),e.finish(6);case 9:case"end":return e.stop()}}),e,null,[[0,,6,9]])})))()}),[]),u.a.useEffect((function(){Object(s.a)(c.a.mark((function e(){var r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!M){e.next=8;break}return t(Object(g.v)(!0)),M&&(r=I),e.next=6,Object(f.Y)({keyWord:r,page:oe,type:v.n.HAPPENING});case 6:(a=e.sent).code===v.b.MSG_SUCCESS&&a.data&&a.data.results?(D(null===a.data.results?[]:a.data.results),A(a.data.totalPages),R(a.data.totalRecords)):(D([]),A(1),R(0),_.b.error({title:n("no_results_found"),message:n("no_results_found_for_your_search")}));case 8:return e.prev=8,t(Object(g.v)(!1)),J(),e.finish(8);case 12:case"end":return e.stop()}}),e,null,[[0,,8,12]])})))()}),[M,oe,I]);var le=u.a.useCallback(Object(s.a)(c.a.mark((function r(){var a;return c.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,ne(),t(Object(g.v)(!0)),r.next=5,Object(f.W)({id:Y.id});case 5:(a=r.sent).code===v.b.MSG_SUCCESS?(B(null),e.push("/admin/voucher")):_.b.error({title:n("error"),message:a.message?a.message.text:"Error"}),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(0),console.log("delete voucher error");case 12:return r.prev=12,t(Object(g.v)(!1)),r.finish(12);case 15:case"end":return r.stop()}}),r,null,[[0,9,12,15]])}))),[Y]);return Object(r.jsxs)(d.d,{children:[Object(r.jsxs)(b.c,{maxW:"570px",borderRadius:"4px",overflow:"hidden",children:[Object(r.jsx)(b.a,{value:I,onChange:function(e){return T(e.target.value)},placeholder:"Search voucher name, code"}),Object(r.jsx)(b.g,{borderRadius:"4px",cursor:"pointer",h:"full",bg:"primary.100",w:"100px",children:Object(r.jsx)(d.e,{onClick:V,children:Object(r.jsx)(p.a,{as:w.e,w:"24px",h:"24px",color:"white"})})})]}),Object(r.jsx)(d.d,{mt:"6",bg:"white",borderRadius:"4px",overflow:"auto",borderWidth:"1px",borderColor:"border-5",children:Object(r.jsxs)(j.a,{variant:"simple",children:[Object(r.jsx)(j.h,{h:"52px",bg:"primary.100",children:Object(r.jsx)(j.i,{children:re.map((function(e,t){return Object(r.jsx)(j.g,{borderBottomWidth:"0px",color:"white",textStyle:"b-md",textTransform:"capitalize",isNumeric:2===t||3===t||t===re.length-1,children:e},t)}))})}),Object(C.isEmpty)(P)?Object(r.jsx)(d.d,{minH:"220px",children:Object(r.jsxs)(d.e,{h:"220px",position:"absolute",insetX:"0",flexDirection:"column",alignSelf:"center",children:[Object(r.jsx)(x.a,{w:"150px",h:"100px",src:y.a.no_data}),Object(r.jsx)(d.C,{textStyle:"body",textAlign:"center",color:"primary.100",mt:"1",children:"No Data Found"})]})}):Object(r.jsx)(r.Fragment,{children:P.map((function(t,n){return Object(r.jsx)(S.v,{item:t,index:n,onUpdate:function(){e.push({pathname:"/admin/voucher/update",query:t})},onDelete:function(){B(t),te()}},n)}))})]})}),Object(r.jsxs)(d.j,{justifyContent:"space-between",alignItems:"center",children:[Object(r.jsx)(S.m,{pagesCount:se,currentPage:oe,isDisabled:ue,onPageChange:function(e){D([]),ie(e)},pages:ce,mt:"24px",mb:"8px"}),Object(r.jsx)(d.C,{textStyle:"h4-m",children:n("results_page",{start:50*(oe-1)+1,end:50*(oe-1)+P.length,total:G})})]}),Object(r.jsx)(S.j,{isOpen:$,onClose:ne,title:"Confirm Deletion",description:n("deleteConfirm"),buttonLeft:{title:n("cancel"),onClick:ne},buttonRight:{title:n("confirm"),onClick:le}})]})};t.default=P},VAzD:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/voucher/components/TableHappening",function(){return n("7GH4")}])}},[["VAzD",0,1,9,13,16,18,19,21,20,17,22,2,3,4,6,5,7,8,10,12,11,14,15,23]]]);