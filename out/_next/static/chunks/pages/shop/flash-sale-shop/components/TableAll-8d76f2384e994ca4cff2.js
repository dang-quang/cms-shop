_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[121],{"84Tj":function(e,t,a){"use strict";a.r(t),a.d(t,"TableAll",(function(){return k}));var s=a("nKUr"),r=a("o0o1"),n=a.n(r),c=a("HaE+"),o=a("ODXe"),l=a("q1tI"),i=a.n(l),u=a("WIEF"),b=a("sp93"),p=a("s/Ec"),d=a("oxre"),j=a("9kay"),f=a("Wgwc"),h=a.n(f),O=a("/MKj"),_=a("DzNn"),x=a("Orb1"),g=a("WztA"),m=a("20a2"),v=a("bgFo"),S=a("LvDl"),C=a("No4j"),k=function(){var e=143,t="YYYY-MM-DD",a=Object(m.useRouter)(),r=Object(O.useDispatch)(),l=Object(j.c)().t,f=Object(O.useSelector)((function(e){return e.app})),k=f.loading,w=f.showLoader,E=k||w,D=i.a.useState([]),N=Object(o.a)(D,2),P=N[0],R=N[1],T=i.a.useState(null),U=Object(o.a)(T,2),y=U[0],M=U[1],G=Object(u.d)(!1),I=Object(o.a)(G,2),L=I[0],W=I[1],F=W.on,z=W.off,Y=Object(u.d)(!1),A=Object(o.a)(Y,2),X=A[0],q=A[1],H=q.on,J=q.off,K=Object(u.d)(!1),B=Object(o.a)(K,2),Q=B[0],V=B[1],Z=V.on,$=V.off,ee=i.a.useState(1),te=Object(o.a)(ee,2),ae=(te[0],te[1]),se=i.a.useState(0),re=Object(o.a)(se,2),ne=re[0],ce=re[1],oe=i.a.useState([]),le=Object(o.a)(oe,2),ie=le[0],ue=le[1],be=[l("time"),l("products"),l("status"),l("enable_disable"),l("actions")],pe=Object(d.usePagination)({total:ne,limits:{outer:1,inner:2},initialState:{pageSize:50,isDisabled:!1,currentPage:1}}),de=pe.pages,je=pe.pagesCount,fe=pe.currentPage,he=pe.setCurrentPage,Oe=pe.isDisabled;i.a.useEffect((function(){Object(c.a)(n.a.mark((function t(){var a;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r(Object(_.v)(!0)),t.next=4,Object(C.h)({page:1,shopId:e});case 4:(a=t.sent).code===x.b.MSG_SUCCESS&&a.data&&a.data.results?(R(a.data.results),ae(a.data.totalPages),ce(a.data.totalRecords)):g.b.error({title:l("error"),message:l("no_data_exists")});case 6:return t.prev=6,r(Object(_.v)(!1)),t.finish(6);case 9:case"end":return t.stop()}}),t,null,[[0,,6,9]])})))()}),[]);var _e=i.a.useCallback(Object(c.a)(n.a.mark((function t(){var a;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,ue([]),r(Object(_.v)(!0)),r(Object(_.o)(!0)),t.next=6,Object(C.h)({page:1,shopId:e});case 6:(a=t.sent).code===x.b.MSG_SUCCESS&&a.data&&a.data.results?(R(a.data.results),ae(a.data.totalPages),ce(a.data.totalRecords)):(R([]),ae(1),ce(0),g.b.error({title:l("error"),message:l("no_data_exists")}));case 8:return t.prev=8,r(Object(_.v)(!1)),setTimeout((function(){r(Object(_.o)(!1))}),2e3),t.finish(8);case 12:case"end":return t.stop()}}),t,null,[[0,,8,12]])}))),[]);i.a.useEffect((function(){Object(c.a)(n.a.mark((function a(){var s;return n.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,!(ie.length<2)){a.next=3;break}return a.abrupt("return");case 3:return r(Object(_.v)(!0)),r(Object(_.o)(!0)),a.next=7,Object(C.h)({page:1,shopId:e,fromDate:h()(ie[0]).format(t),toDate:h()(ie[1]).format(t)});case 7:(s=a.sent).code===x.b.MSG_SUCCESS&&s.data&&s.data.results?(R(s.data.results),ae(s.data.totalPages),ce(s.data.totalRecords)):(R([]),ae(1),ce(0),g.b.error({title:l("error"),message:l("no_data_exists")}));case 9:return a.prev=9,r(Object(_.v)(!1)),setTimeout((function(){r(Object(_.o)(!1))}),2e3),a.finish(9);case 13:case"end":return a.stop()}}),a,null,[[0,,9,13]])})))()}),[ie]);var xe=i.a.useCallback(Object(c.a)(n.a.mark((function a(){var s,c;return n.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return s={page:1,shopId:e},2===ie.length&&(s.fromDate=h()(ie[0]).format(t),s.toDate=h()(ie[1]).format(t)),a.next=4,Object(C.h)(s);case 4:(c=a.sent).code===x.b.MSG_SUCCESS&&c.data&&c.data.results?(R(c.data.results),ae(c.data.totalPages),ce(c.data.totalRecords),r(Object(_.s)(0))):g.b.error({title:l("error"),message:l("no_data_exists")});case 6:case"end":return a.stop()}}),a)}))),[ie]),ge=i.a.useCallback(Object(c.a)(n.a.mark((function e(){var t;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,y){e.next=3;break}return e.abrupt("return");case 3:return r(Object(_.v)(!0)),e.next=6,Object(C.n)({id:y.id});case 6:(t=e.sent).code===x.b.MSG_SUCCESS?(M(null),xe()):g.b.error({title:l("error"),message:t.message?t.message.text:l("error")}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log("delete flash sale error");case 13:return e.prev=13,z(),r(Object(_.v)(!1)),e.finish(13);case 17:case"end":return e.stop()}}),e,null,[[0,10,13,17]])}))),[y]),me=i.a.useCallback(Object(c.a)(n.a.mark((function e(){var t;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,y){e.next=3;break}return e.abrupt("return");case 3:return r(Object(_.v)(!0)),e.next=6,Object(C.o)({ids:[y.id],type:x.k.TURN_OFF});case 6:(t=e.sent).code===x.b.MSG_SUCCESS?(M(null),xe()):g.b.error({title:l("error"),message:t.message?t.message.text:l("error")}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log("disable flash sale error");case 13:return e.prev=13,$(),r(Object(_.v)(!1)),e.finish(13);case 17:case"end":return e.stop()}}),e,null,[[0,10,13,17]])}))),[y]),ve=i.a.useCallback(Object(c.a)(n.a.mark((function e(){var t;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,y){e.next=3;break}return e.abrupt("return");case 3:return r(Object(_.v)(!0)),e.next=6,Object(C.o)({ids:[y.id],type:x.k.TURN_ON});case 6:(t=e.sent).code===x.b.MSG_SUCCESS?(M(null),xe()):g.b.error({title:l("error"),message:t.message?t.message.text:l("error")}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log("disable flash sale error");case 13:return e.prev=13,J(),r(Object(_.v)(!1)),e.finish(13);case 17:case"end":return e.stop()}}),e,null,[[0,10,13,17]])}))),[y]);return Object(s.jsxs)(b.d,{children:[Object(s.jsx)(v.p,{selectedDates:ie,onDateChange:ue,onClear:_e}),Object(s.jsx)(b.d,{position:"relative",mt:"6",bg:"white",minH:Object(S.isEmpty)(P)||E?"300px":"unset",borderRadius:"4px",overflow:"auto",borderWidth:"1px",borderColor:"border-5",children:Object(s.jsxs)(p.a,{variant:"simple",minW:"5xl",children:[Object(s.jsx)(p.h,{h:"52px",bg:"primary.100",children:Object(s.jsx)(p.i,{children:be.map((function(e,t){return Object(s.jsx)(p.g,{borderBottomWidth:"0px",color:"white",textStyle:"b-md",textTransform:"capitalize",isNumeric:t===be.length-1,children:e},t)}))})}),E?Object(s.jsx)(v.f,{}):Object(S.isEmpty)(P)?Object(s.jsx)(v.b,{title:l("no_shop_flash_sales_found")}):Object(s.jsx)(s.Fragment,{children:P.map((function(e,t){return Object(s.jsx)(v.d,{item:e,isLast:t===P.length-1,onUpdate:function(){a.push({pathname:"/shop/flash-sale-shop/update",query:e})},onDelete:function(){M(e),F()},onChange:function(){M(e),e.isShow===x.k.TURN_ON?Z():H()}},t)}))})]})}),!Object(S.isEmpty)(P)&&!E&&Object(s.jsxs)(b.j,{justifyContent:"space-between",alignItems:"center",children:[Object(s.jsx)(v.m,{pagesCount:je,currentPage:fe,isDisabled:Oe,onPageChange:function(e){R([]),he(e)},pages:de,mt:"24px",mb:"8px"}),Object(s.jsx)(b.C,{textStyle:"h4-m",children:l("results_page",{start:50*(fe-1)+1,end:50*(fe-1)+P.length,total:ne})})]}),Object(s.jsx)(v.j,{isOpen:L,onClose:z,title:l("flash_sale_shop.delete_shop_flash_sale"),description:l("flash_sale_shop.delete_shop_flash_sale_description"),buttonLeft:{title:l("cancel"),onClick:z},buttonRight:{title:l("delete"),onClick:ge}}),Object(s.jsx)(v.j,{isOpen:Q,onClose:$,title:l("flash_sale_shop.title_disable_flash_sale"),description:l("flash_sale_shop.description_disable_flash_sale"),buttonLeft:{title:l("cancel"),onClick:$},buttonRight:{title:l("disable"),onClick:me}}),Object(s.jsx)(v.j,{isOpen:X,onClose:J,title:l("flash_sale_shop.title_enable_flash_sale"),description:l("flash_sale_shop.description_enable_flash_sale"),buttonLeft:{title:l("cancel"),onClick:J},buttonRight:{title:l("flash_sale_shop.enable_items"),onClick:ve}})]})};t.default=k},u3OE:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/shop/flash-sale-shop/components/TableAll",function(){return a("84Tj")}])}},[["u3OE",0,1,9,13,16,18,19,21,20,17,22,2,3,4,5,6,7,10,8,12,11,14,15,23]]]);