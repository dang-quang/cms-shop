_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[134],{"P0+b":function(e,t,r){"use strict";r.r(t);var n=r("nKUr"),c=r("KQm4"),o=r("o0o1"),s=r.n(o),a=r("HaE+"),i=r("ODXe"),l=r("q1tI"),u=r.n(l),p=r("WIEF"),d=r("sp93"),b=r("s/Ec"),j=r("N4gV"),h=r("Q0SC"),O=r("oxre"),f=r("9kay"),x=r("LvDl"),m=r.n(x),g=r("No4j"),_=r("/MKj"),C=r("DzNn"),S=r("Orb1"),v=r("WztA"),k=r("20a2"),E=r("bgFo"),w=r("v0fL");t.default=function(){var e=143,t=Object(k.useRouter)(),r=Object(_.useDispatch)(),o=Object(f.c)().t,l=Object(_.useSelector)((function(e){return e.app})),y=l.loading,P=l.showLoader,D=y||P,I=u.a.useState([]),L=Object(i.a)(I,2),T=L[0],N=L[1],W=u.a.useState([]),M=Object(i.a)(W,2),U=M[0],z=M[1],A=Object(p.d)(!1),G=Object(i.a)(A,2),R=G[0],V=G[1],q=V.toggle,K=V.off,X=V.on,F=Object(p.k)(),H=F.isOpen,J=F.onOpen,Q=F.onClose,Y=Object(p.k)(),B=Y.isOpen,Z=Y.onOpen,$=Y.onClose,ee=Object(p.k)(),te=ee.isOpen,re=ee.onOpen,ne=ee.onClose,ce=Object(p.k)(),oe=ce.isOpen,se=ce.onOpen,ae=ce.onClose,ie=u.a.useState(1),le=Object(i.a)(ie,2),ue=(le[0],le[1]),pe=u.a.useState(0),de=Object(i.a)(pe,2),be=de[0],je=de[1],he=Object(_.useSelector)((function(e){return e.product})),Oe=he.doSearchProduct,fe=he.searchProductName,xe=he.searchProductStockMin,me=he.searchProductStockMax,ge=he.searchProductCategory,_e=[o("product_name"),o("price"),o("stock"),o("sales"),o("action")],Ce=Object(O.usePagination)({total:be,limits:{outer:1,inner:2},initialState:{pageSize:50,isDisabled:!1,currentPage:1}}),Se=Ce.pages,ve=Ce.pagesCount,ke=Ce.currentPage,Ee=Ce.setCurrentPage,we=Ce.isDisabled;u.a.useEffect((function(){Object(a.a)(s.a.mark((function t(){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r(Object(C.v)(!0)),t.next=4,Object(g.i)({id:e,page:1});case 4:(n=t.sent)&&n.code===S.b.MSG_SUCCESS&&!Object(x.isEmpty)(n.dataProduct)?(N(n.dataProduct),ue(n.totalPages),je(n.totalProduct)):v.b.error({title:o("error"),message:o("no_data_exists")}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log("get shop products error",t.t0);case 11:return t.prev=11,r(Object(C.v)(!1)),t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[0,8,11,14]])})))()}),[]),u.a.useEffect((function(){Object(a.a)(s.a.mark((function t(){var n,c;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,n={id:e,page:ke},!Oe){t.next=10;break}return r(Object(C.v)(!0)),r(Object(C.o)(!0)),Oe&&(fe&&(n.keyWord=fe),xe&&(n.minStock=xe),me&&(n.maxStock=me),ge&&(n.categoryId=ge)),t.next=8,Object(g.i)(n);case 8:(c=t.sent).code!==S.b.MSG_SUCCESS||Object(x.isEmpty)(c.dataProduct)?(N([]),ue(1),je(0),v.b.error({title:o("no_results_found"),message:o("no_results_found_for_your_search")})):(N(c.dataProduct),ue(c.totalPages),je(c.totalProduct));case 10:return t.prev=10,r(Object(w.e)(!1)),r(Object(C.v)(!1)),setTimeout((function(){r(Object(C.o)(!1))}),2e3),t.finish(10);case 15:case"end":return t.stop()}}),t,null,[[0,,10,15]])})))()}),[e,Oe,ke,fe,xe,me,ge]);var ye=u.a.useCallback((function(){Object(x.isEmpty)(T)||(q(),z(R?[]:T))}),[R,T]),Pe=u.a.useCallback((function(e){if(U.find((function(t){return t.id===e.id}))){var t=U.filter((function(t){return t.id!==e.id}));z(t)}else{var r=[].concat(Object(c.a)(U),[e]);z(r)}var n=U.length===T.length;n&&!R?K():!n&&R&&X()}),[U,T,R]),De=u.a.useCallback(Object(a.a)(s.a.mark((function t(){var n,c;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={id:e,page:1},fe&&(n.keyWord=fe),xe&&(n.minStock=xe),me&&(n.maxStock=me),ge&&(n.categoryId=ge),t.next=7,Object(g.i)(n);case 7:(c=t.sent).code!==S.b.MSG_SUCCESS||Object(x.isEmpty)(c.dataProduct)?v.b.error({title:o("error"),message:o("no_data_exists")}):(N(c.dataProduct),ue(c.totalPages),je(c.totalProduct),r(Object(C.t)(0)));case 9:case"end":return t.stop()}}),t)}))),[e,ke,fe,xe,me,ge]),Ie=u.a.useCallback(Object(a.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,Q(),r(Object(C.v)(!0)),t=Array.from(U,(function(e){return e.id})),e.next=6,Object(g.p)({ids:t,type:S.h.DELETE});case 6:(n=e.sent).code===S.b.MSG_SUCCESS?(z([]),De()):v.b.error({title:o("error"),message:n.message?n.message.text:o("error")}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log("delete product error");case 13:return e.prev=13,r(Object(C.v)(!1)),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[0,10,13,16]])}))),[U]),Le=u.a.useCallback(Object(a.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,$(),r(Object(C.v)(!0)),t=Array.from(U,(function(e){return e.id})),e.next=6,Object(g.p)({ids:t,type:S.h.DELIST});case 6:(n=e.sent).code===S.b.MSG_SUCCESS?(z([]),De()):v.b.error({title:o("error"),message:n.message?n.message.text:o("error")}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log("delist product error");case 13:return e.prev=13,r(Object(C.v)(!1)),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[0,10,13,16]])}))),[U]),Te=u.a.useCallback(Object(a.a)(s.a.mark((function e(){var t,n,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,ae(),ne(),r(Object(C.v)(!0)),t=m.a.filter(U,{isShow:S.l.DELISTED}),n=Array.from(t,(function(e){return e.id})),e.next=8,Object(g.p)({ids:n,type:S.h.ACTIVE});case 8:(c=e.sent).code===S.b.MSG_SUCCESS?(z([]),De()):v.b.error({title:o("error"),message:c.message?c.message.text:o("error")}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log("publish product error");case 15:return e.prev=15,r(Object(C.v)(!1)),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[0,12,15,18]])}))),[U]);return Object(n.jsxs)(d.d,{children:[Object(n.jsxs)(d.d,{overflow:"auto",position:"relative",minH:Object(x.isEmpty)(T)||D?"300px":"unset",borderWidth:"1px",borderRadius:"4",borderColor:"border-5",children:[Object(n.jsxs)(b.a,{variant:"simple",minW:"5xl",children:[Object(n.jsx)(b.h,{h:"52px",bg:"bg-2",children:Object(n.jsx)(b.i,{children:_e.map((function(e,t){return Object(n.jsxs)(b.g,{borderBottomWidth:"0px",w:0===t?"40%":"15%",color:"text-note",textStyle:"b-md",textTransform:"capitalize",isNumeric:t===_e.length-1,children:[0===t&&Object(n.jsx)(j.a,{isChecked:R,onChange:ye,mr:"2"}),e]},t)}))})}),D?Object(n.jsx)(E.h,{}):Object(x.isEmpty)(T)?Object(n.jsx)(E.b,{title:o("no_products_found")}):T.map((function(e,r){var c=U&&!!U.find((function(t){return t.id===e.id}));return Object(n.jsx)(E.q,{item:e,isChecked:c,isLast:r===T.length-1,onClick:function(){return Pe(e)},onUpdate:function(){t.push({pathname:"/shop/product/update",query:e})}},r)}))]}),!Object(x.isEmpty)(T)&&!D&&Object(n.jsxs)(d.j,{justifyContent:"space-between",alignItems:"center",borderTopWidth:"1px",borderColor:"border-5",px:"6",py:"4",children:[Object(n.jsx)(E.m,{pagesCount:ve,currentPage:ke,isDisabled:we,onPageChange:function(e){N([]),Ee(e)},pages:Se}),Object(n.jsx)(d.C,{textStyle:"h4-m",children:o("results_page",{start:50*(ke-1)+1,end:50*(ke-1)+T.length,total:null!==be&&void 0!==be?be:0})})]}),!Object(x.isEmpty)(U)&&Object(n.jsxs)(d.j,{h:"64px",bg:"bg-1",justifyContent:"space-between",position:"fixed",left:"290px",right:"35px",bottom:"0",alignItems:"center",boxShadow:"2xl",px:"12",py:"4",children:[Object(n.jsxs)(d.m,{children:[Object(n.jsx)(j.a,{isChecked:R,onChange:ye}),Object(n.jsx)(d.C,{color:"text-basic",textStyle:"h3",children:o("select_all")})]}),Object(n.jsxs)(d.m,{gap:"2",children:[Object(n.jsx)(d.C,{color:"text-basic",textStyle:"h4",children:o("products_selected",{number:U.length})}),Object(n.jsx)(h.a,{variant:"outline-control",minW:"80px",size:"sm",children:o("delete"),onClick:J}),(m.a.filter(U,{isShow:S.l.ACTIVE}).length>0||m.a.filter(U,{isShow:S.l.PENDING}).length>0)&&Object(n.jsx)(h.a,{variant:"outline-control",minW:"80px",size:"sm",children:o("delist"),onClick:Z}),m.a.filter(U,{isShow:S.l.DELISTED}).length>0&&Object(n.jsx)(h.a,{variant:"primary",minW:"80px",size:"sm",children:o("publish"),onClick:function(){m.a.every(U,{isShow:S.l.DELISTED})?re():se()}})]})]})]}),Object(n.jsx)(E.j,{isOpen:H,onClose:Q,title:o("shop_product.delete_product"),description:o("shop_product.delete_product_description"),buttonLeft:{title:o("cancel"),onClick:Q},buttonRight:{title:o("delete"),onClick:Ie}}),Object(n.jsx)(E.j,{isOpen:B,onClose:$,title:o("shop_product.delist_selected_products",{number:U.length}),description:o("shop_product.delist_selected_products_description"),buttonLeft:{title:o("cancel"),onClick:$},buttonRight:{title:o("confirm"),onClick:Le}}),Object(n.jsx)(E.j,{isOpen:oe,onClose:ae,title:o("shop_product.can_not_be_published"),description:o("shop_product.description_publish_product",{number:U.length,number_publish:m.a.filter(U,{isShow:S.l.DELISTED}).length}),buttonLeft:{title:o("cancel"),onClick:ae},buttonRight:{title:o("confirm"),onClick:Te}}),Object(n.jsx)(E.j,{isOpen:te,onClose:ne,title:o("shop_product.title_publish_all_products",{number:U.length}),description:o("shop_product.description_publish_all_products"),buttonLeft:{title:o("cancel"),onClick:ne},buttonRight:{title:o("confirm"),onClick:Te}})]})}},hVuY:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/shop/product/components/TableAll",function(){return r("P0+b")}])}},[["hVuY",0,1,9,13,16,18,19,21,20,17,22,2,3,4,5,6,7,10,8,12,11,14,15,23]]]);