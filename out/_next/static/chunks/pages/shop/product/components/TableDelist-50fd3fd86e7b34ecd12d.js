_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[136],{YP3b:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/shop/product/components/TableDelist",function(){return r("kUxD")}])},kUxD:function(e,t,r){"use strict";r.r(t);var c=r("nKUr"),n=r("KQm4"),o=r("o0o1"),a=r.n(o),s=r("HaE+"),i=r("ODXe"),u=r("q1tI"),l=r.n(u),d=r("WIEF"),p=r("sp93"),b=r("s/Ec"),j=r("N4gV"),h=r("Q0SC"),O=r("oxre"),x=r("9kay"),f=(r("N54T"),r("LvDl")),m=r("No4j"),g=r("/MKj"),_=r("DzNn"),C=r("Orb1"),v=r("WztA"),S=r("20a2"),k=r("bgFo"),y=r("v0fL");t.default=function(){var e=143,t=Object(S.useRouter)(),r=Object(g.useDispatch)(),o=Object(x.c)().t,u=Object(g.useSelector)((function(e){return e.app})),E=u.loading,P=u.showLoader,w=E||P,D=l.a.useState([]),T=Object(i.a)(D,2),N=T[0],I=T[1],L=l.a.useState([]),W=Object(i.a)(L,2),U=W[0],M=W[1],z=Object(d.d)(!1),G=Object(i.a)(z,2),A=G[0],R=G[1],q=R.toggle,K=R.off,X=R.on,F=Object(d.k)(),H=F.isOpen,J=F.onOpen,Q=F.onClose,V=Object(d.k)(),Y=V.isOpen,B=V.onOpen,Z=V.onClose,$=l.a.useState(1),ee=Object(i.a)($,2),te=(ee[0],ee[1]),re=l.a.useState(0),ce=Object(i.a)(re,2),ne=ce[0],oe=ce[1],ae=Object(g.useSelector)((function(e){return e.product})),se=ae.doSearchProduct,ie=ae.searchProductName,ue=ae.searchProductStockMin,le=ae.searchProductStockMax,de=ae.searchProductCategory,pe=[o("product_name"),o("price"),o("stock"),o("sales"),o("action")],be=Object(O.usePagination)({total:ne,limits:{outer:1,inner:2},initialState:{pageSize:50,isDisabled:!1,currentPage:1}}),je=be.pages,he=be.pagesCount,Oe=be.currentPage,xe=be.setCurrentPage,fe=be.isDisabled;l.a.useEffect((function(){Object(s.a)(a.a.mark((function t(){var c;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r(Object(_.v)(!0)),t.next=4,Object(m.i)({id:e,page:1,type:C.h.DELIST});case 4:(c=t.sent)&&c.code===C.b.MSG_SUCCESS&&!Object(f.isEmpty)(c.dataProduct)?(I(c.dataProduct),te(c.totalPages),oe(c.totalProduct)):v.b.error({title:o("error"),message:o("no_data_exists")}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log("get shop products error",t.t0);case 11:return t.prev=11,r(Object(_.v)(!1)),t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[0,8,11,14]])})))()}),[]),l.a.useEffect((function(){Object(s.a)(a.a.mark((function t(){var c,n;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,c={id:e,page:Oe,type:C.h.DELIST},!se){t.next=10;break}return r(Object(_.v)(!0)),r(Object(_.o)(!0)),se&&(ie&&(c.keyWord=ie),ue&&(c.minStock=ue),le&&(c.maxStock=le),de&&(c.categoryId=de)),t.next=8,Object(m.i)(c);case 8:(n=t.sent).code!==C.b.MSG_SUCCESS||Object(f.isEmpty)(n.dataProduct)?(I([]),te(1),oe(0),v.b.error({title:o("no_results_found"),message:o("no_results_found_for_your_search")})):(I(n.dataProduct),te(n.totalPages),oe(n.totalProduct));case 10:return t.prev=10,r(Object(y.e)(!1)),r(Object(_.v)(!1)),setTimeout((function(){r(Object(_.o)(!1))}),2e3),t.finish(10);case 15:case"end":return t.stop()}}),t,null,[[0,,10,15]])})))()}),[se,Oe,ie,de,ue,le]);var me=l.a.useCallback((function(){Object(f.isEmpty)(N)||(q(),M(A?[]:N))}),[A,N]),ge=l.a.useCallback((function(e){if(U.find((function(t){return t.id===e.id}))){var t=U.filter((function(t){return t.id!==e.id}));M(t)}else{var r=[].concat(Object(n.a)(U),[e]);M(r)}var c=U.length===N.length;c&&!A?K():!c&&A&&X()}),[U,N,A]),_e=l.a.useCallback(Object(s.a)(a.a.mark((function t(){var c,n;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c={id:e,page:1,type:C.h.DELIST},ie&&(c.keyWord=ie),ue&&(c.minStock=ue),le&&(c.maxStock=le),de&&(c.categoryId=de),t.next=7,Object(m.i)(c);case 7:(n=t.sent).code!==C.b.MSG_SUCCESS||Object(f.isEmpty)(n.dataProduct)?v.b.error({title:o("error"),message:o("no_data_exists")}):(I(n.dataProduct),te(n.totalPages),oe(n.totalProduct),r(Object(_.t)(4)));case 9:case"end":return t.stop()}}),t)}))),[e,Oe,ie,ue,le,de]),Ce=l.a.useCallback(Object(s.a)(a.a.mark((function e(){var t,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,Q(),r(Object(_.v)(!0)),t=Array.from(U,(function(e){return e.id})),e.next=6,Object(m.p)({ids:t,type:C.h.DELETE});case 6:(c=e.sent).code===C.b.MSG_SUCCESS?(M([]),_e()):v.b.error({title:o("error"),message:c.message?c.message.text:o("error")}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log("delete product error");case 13:return e.prev=13,r(Object(_.v)(!1)),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[0,10,13,16]])}))),[U]),ve=l.a.useCallback(Object(s.a)(a.a.mark((function e(){var t,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,Z(),r(Object(_.v)(!0)),t=Array.from(U,(function(e){return e.id})),e.next=6,Object(m.p)({ids:t,type:C.h.ACTIVE});case 6:(c=e.sent).code===C.b.MSG_SUCCESS?(M([]),_e()):v.b.error({title:o("error"),message:c.message?c.message.text:o("error")}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log("publish product error");case 13:return e.prev=13,r(Object(_.v)(!1)),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[0,10,13,16]])}))),[U]);return Object(c.jsxs)(p.d,{children:[Object(c.jsxs)(p.d,{overflow:"auto",position:"relative",minH:Object(f.isEmpty)(N)||w?"300px":"unset",borderWidth:"1px",borderRadius:"4",borderColor:"border-5",children:[Object(c.jsxs)(b.a,{variant:"simple",minW:"5xl",children:[Object(c.jsx)(b.h,{h:"52px",bg:"bg-2",children:Object(c.jsx)(b.i,{children:pe.map((function(e,t){return Object(c.jsxs)(b.g,{borderBottomWidth:"0px",w:0===t?"40%":"15%",color:"text-note",textStyle:"b-md",textTransform:"capitalize",isNumeric:t===pe.length-1,children:[0===t&&Object(c.jsx)(j.a,{isChecked:A,onChange:me,mr:"2"}),e]},t)}))})}),w?Object(c.jsx)(k.h,{}):Object(f.isEmpty)(N)?Object(c.jsx)(k.b,{title:o("no_products_found")}):N.map((function(e,r){var n=U&&!!U.find((function(t){return t.id===e.id}));return Object(c.jsx)(k.q,{item:e,isChecked:n,isLast:r===N.length-1,onClick:function(){return ge(e)},onUpdate:function(){t.push({pathname:"/shop/product/update",query:e})}},r)}))]}),!Object(f.isEmpty)(N)&&!w&&Object(c.jsxs)(p.j,{justifyContent:"space-between",alignItems:"center",borderTopWidth:"1px",borderColor:"border-5",px:"6",py:"4",children:[Object(c.jsx)(k.m,{pagesCount:he,currentPage:Oe,isDisabled:fe,onPageChange:function(e){I([]),xe(e)},pages:je}),Object(c.jsx)(p.C,{textStyle:"h4-m",children:o("results_page",{start:50*(Oe-1)+1,end:50*(Oe-1)+N.length,total:null!==ne&&void 0!==ne?ne:0})})]}),!Object(f.isEmpty)(U)&&Object(c.jsxs)(p.j,{h:"64px",bg:"bg-1",justifyContent:"space-between",position:"fixed",left:"290px",right:"35px",bottom:"0",alignItems:"center",boxShadow:"2xl",px:"12",py:"4",children:[Object(c.jsxs)(p.m,{children:[Object(c.jsx)(j.a,{isChecked:A,onChange:me}),Object(c.jsx)(p.C,{color:"text-basic",textStyle:"h3",children:o("select_all")})]}),Object(c.jsxs)(p.m,{gap:"2",children:[Object(c.jsx)(p.C,{color:"text-basic",textStyle:"h4",children:o("products_selected",{number:U.length})}),Object(c.jsx)(h.a,{variant:"outline-control",minW:"80px",size:"sm",children:o("delete"),onClick:J}),Object(c.jsx)(h.a,{variant:"primary",minW:"80px",size:"sm",children:o("publish"),onClick:B})]})]})]}),Object(c.jsx)(k.j,{isOpen:H,onClose:Q,title:o("shop_product.delete_product"),description:o("shop_product.delete_product_description"),buttonLeft:{title:o("cancel"),onClick:Q},buttonRight:{title:o("delete"),onClick:Ce}}),Object(c.jsx)(k.j,{isOpen:Y,onClose:Z,title:o("shop_product.title_publish_all_products",{number:U.length}),description:o("shop_product.description_publish_all_products"),buttonLeft:{title:o("cancel"),onClick:Z},buttonRight:{title:o("confirm"),onClick:ve}})]})}}},[["YP3b",0,1,9,13,16,18,19,21,20,17,22,2,3,4,6,5,7,8,10,12,11,14,15,23]]]);